/*!
 * @license :jsstore - V3.0.0 - 26/05/2019
 * https://github.com/ujjwalguptaofficial/JsStore
 * Copyright (c) 2019 @Ujjwal Gupta; Licensed MIT
 */
var JsStoreWorker=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=21)}([function(e,t,n){"use strict";var r,o,i,u,s,c,a,h;n.d(t,"f",function(){return r}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return s}),n.d(t,"g",function(){return c}),n.d(t,"e",function(){return a}),n.d(t,"a",function(){return h}),function(e){e.First="f",e.Last="l",e.Any="a"}(r||(r={})),function(e){e.Registered="registerd",e.Failed="failed",e.NotStarted="not_started"}(o||(o={})),function(e){e.Connected="connected",e.Closed="closed",e.NotStarted="not_started",e.UnableToStart="unable_to_start",e.ClosedByJsStore="closed_by_jsstore"}(i||(i={})),function(e){e.String="string",e.Object="object",e.Array="array",e.Number="number",e.Boolean="boolean",e.Null="null",e.DateTime="date_time"}(u||(u={})),function(e){e.UndefinedColumn="undefined_column",e.UndefinedValue="undefined_value",e.UndefinedColumnName="undefined_column_name",e.UndefinedDbName="undefined_database_name",e.UndefinedColumnValue="undefined_column_value",e.NotArray="not_array",e.NoValueSupplied="no_value_supplied",e.ColumnNotExist="column_not_exist",e.EnableSearchOff="enable_search_off",e.InvalidOp="invalid_operator",e.NullValue="null_value",e.WrongDataType="wrong_data_type",e.NextJoinNotExist="next_join_not_exist",e.TableNotExist="table_not_exist",e.DbNotExist="db_not_exist",e.ConnectionAborted="connection_aborted",e.ConnectionClosed="connection_closed",e.NotObject="not_object",e.InvalidConfig="invalid_config",e.DbBlocked="Db_blocked",e.IndexedDbUndefined="indexeddb_undefined",e.IndexedDbBlocked="indexeddb_blocked",e.NullValueInWhere="null_value_in_where",e.InvalidJoinQuery="invalid_join_query"}(s||(s={})),function(e){e.Where="where",e.Like="like",e.Regex="regex",e.In="in",e.Between="-",e.GreaterThan=">",e.LessThan="<",e.GreaterThanEqualTo=">=",e.LessThanEqualTo="<=",e.NotEqualTo="!=",e.Aggregate="aggregate",e.Max="max",e.Min="min",e.Avg="avg",e.Count="count",e.Sum="sum",e.Or="or",e.Skip="skip",e.Limit="limit",e.And="and",e.IgnoreCase="ignoreCase"}(c||(c={})),function(e){e.ReadOnly="readonly",e.ReadWrite="readwrite"}(a||(a={})),function(e){e.InitDb="init_db",e.IsDbExist="is_db_exist",e.GetDbVersion="get_db_version",e.GetDbList="get_db_list",e.Get="get",e.Set="set",e.Select="select",e.Insert="insert",e.Update="update",e.Remove="remove",e.GetDbSchema="get_db_schema",e.OpenDb="open_db",e.Clear="clear",e.DropDb="drop_db",e.Count="count",e.BulkInsert="bulk_insert",e.ChangeLogStatus="change_log_status",e.Transaction="transaction",e.FinishTransaction="finish_transaction",e.Terminate="terminate",e.InitKeyStore="init_keystore",e.CloseDb="close_db"}(h||(h={}))},function(e,t,n){"use strict";var r=function(e){return new Promise(e)},o=function(e){return Promise.all(e)};n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o})},function(e,t,n){"use strict";var r,o=n(6),i=n(16),u=n(0),s=n(4),c=n(17),a=n(1),h=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t,n){var r=e.call(this)||this;return r.onSuccess=t,r.onError=n,r}return h(t,e),t.prototype.execute=function(e){var t=this,n=[],r=indexedDB.open(this.dbName,this.dbVersion),o=!1;r.onerror=function(e){null!=t.onError&&t.onError(e.target.error)},r.onsuccess=function(e){t.dbStatus.conStatus=u.b.Connected,t.dbConnection=r.result,t.dbConnection.onclose=t.onDbClose.bind(t),t.dbConnection.onversionchange=t.onDbVersionChange.bind(t),t.dbConnection.onerror=t.onDbConError.bind(t),o?t.savedbNameIntoDbList_().then(function(){null!=t.onSuccess&&t.onSuccess(o)}):(t.setPrimaryKey_(),t.onSuccess(o))},r.onupgradeneeded=function(r){o=!0;var i=r.target.result,u=function(e,r){try{var o;e.primaryKey.length>0?(t.activeDb.tables[r].primaryKey=e.primaryKey,o=i.createObjectStore(e.name,{keyPath:e.primaryKey})):o=i.createObjectStore(e.name,{autoIncrement:!0}),e.columns.forEach(function(n){if(!0===n.enableSearch){var r=n.primaryKey?{unique:!0}:{unique:n.unique};r.multiEntry=n.multiEntry;var i=null==n.keyPath?n.name:n.keyPath;o.createIndex(n.name,i,r),n.autoIncrement&&s.a.set("JsStore_"+t.dbName+"_"+e.name+"_"+n.name+"_Value",0)}}),n.push(e.name),s.a.set("JsStore_"+t.dbName+"_"+e.name+"_Version",e.version)}catch(e){console.error(e)}};e.forEach(function(e,t){e.requireDelete?(i.objectStoreNames.contains(e.name)&&i.deleteObjectStore(e.name),u(e,t)):e.requireCreation&&u(e,t)})}},t.prototype.savedbNameIntoDbList_=function(){var e=this;return Object(a.a)(function(t,n){e.getDbList().then(function(r){r.indexOf(e.dbName)<0?(r.push(e.dbName),e.setDbList(r).then(t).catch(n)):t()}).catch(n)})},t.prototype.setPrimaryKey_=function(){var e=this;this.activeDb.tables.forEach(function(t,n){t.columns.every(function(t){return e.activeDb.tables[n].primaryKey=t.primaryKey?t.name:"",!t.primaryKey})})},t}(c.a),f=n(7),p=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),y=function(e){function t(t,n,r){var o=e.call(this)||this;return o.query=t,o.onSuccess=n,o.onError=r,o}return p(t,e),t.prototype.execute=function(){var e=this;this.createTransaction([this.query],function(){null==e.error?e.onSuccess():e.onError(e.error)});var t=this.transaction.objectStore(this.query).clear();t.onsuccess=function(t){e.getTable(e.query).columns.forEach(function(t){t.autoIncrement&&s.a.set("JsStore_"+e.activeDb.name+"_"+e.query+"_"+t.name+"_Value",0)})},t.onerror=this.onErrorOccured},t}(f.a),_=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=function(e){function t(t,n,r){var o=e.call(this)||this;return o.query=t,o.onSuccess=n,o.onError=r,o}return _(t,e),t.prototype.execute=function(){try{this.bulkinsertData(this.query.values),this.query.values=null}catch(e){this.onExceptionOccured(e,{tableName:this.query.into})}},t.prototype.bulkinsertData=function(e){var t=this;this.createTransaction([this.query.into],function(){t.onSuccess()}),this.objectStore=this.transaction.objectStore(this.query.into);for(var n=!0===this.query.upsert?"put":"add",r=0,o=e.length;r<o;r++)this.objectStore[n](e[r])},t}(f.a),b=n(11);n.d(t,"d",function(){return o.a}),n.d(t,"c",function(){return i.a}),n.d(t,"e",function(){return l}),n.d(t,"b",function(){return y}),n.d(t,"a",function(){return d}),n.d(t,"f",function(){return b.a})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),o=n(9),i=function(){function e(e,t){void 0===t&&(t=null),this.type=e,this.info_=t,this.message=this.getMsg_()}return e.prototype.throw=function(){throw this.get()},e.log=function(e){o.a.isLogEnabled&&console.log(e)},e.prototype.logError=function(){console.error(this.get())},e.prototype.get=function(){return{message:this.message,type:this.type}},e.prototype.getMsg_=function(){var e;switch(this.type){case r.d.NotArray:e="Supplied value is not an array";break;case r.d.UndefinedColumn:e="Column is undefined in Where";break;case r.d.UndefinedValue:e="Value is undefined in Where";break;case r.d.UndefinedColumnName:e="Column name is undefined '"+this.info_.TableName+"'";break;case r.d.UndefinedDbName:e="Database name is not supplied";break;case r.d.UndefinedColumnValue:e="Column value is undefined";break;case r.d.NoValueSupplied:e="No value is supplied";break;case r.d.InvalidOp:e="Invalid Op Value '"+this.info_.Op+"'";break;case r.d.ColumnNotExist:e=this.info_.isOrder?"Column '"+this.info_.column+"' in order query does not exist":"Column '"+this.info_.column+"' does not exist";break;case r.d.EnableSearchOff:e="Search is turned off for the Column '"+this.info_.ColumnName+"'";break;case r.d.NullValue:e="Null value is not allowed for column '"+this.info_.ColumnName+"'";break;case r.d.WrongDataType:e="Supplied value for column '"+this.info_.ColumnName+"' have wrong data type";break;case r.d.NextJoinNotExist:e="Next join details not supplied";break;case r.d.TableNotExist:e="Table '"+this.info_.tableName+"' does not exist";break;case r.d.DbNotExist:e="Database with name "+this.info_.dbName+" does not exist";break;case r.d.NotObject:e="supplied value is not object";break;case r.d.InvalidOp:e="Invalid Config '"+this.info_.Config+" '";break;case r.d.DbBlocked:e="database is blocked, cant be deleted right now";break;case r.d.NullValueInWhere:e="Null/undefined is not allowed in where. Column '"+this.info_.column+"' has null";break;case r.d.InvalidJoinQuery:e="column "+this.info_.column+" exist in both table "+this.info_.table1+" & "+this.info_.table2;break;default:e=this.message}return e},e}()},function(e,t,n){"use strict";var r=n(15);n.d(t,"a",function(){return r.a})},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),o=n(4),i=n(2),u=n(1),s=n(10),c=function(){function e(){}return e.isNull=function(e){if(null==e)return!0;switch(typeof e){case"string":return 0===e.length;case"number":return isNaN(e)}return!1},e.isNullOrEmpty=function(e){return null==e||0===e.length},e.isString=function(e){return typeof e===r.c.String},e.isArray=function(e){return Array.isArray(e)},e.isObject=function(e){return typeof e===r.c.Object},e.getObjectFirstKey=function(e){for(var t in e)return t;return null},e.getType=function(e){if(null==e)return r.c.Null;var t=typeof e;switch(t){case"object":if(Array.isArray(e))return r.c.Array;if(e.getDate&&e.getTime)return r.c.DateTime;default:return t}},e.getAutoIncrementValues=function(e){var t=e.columns.filter(function(e){return e.autoIncrement});return Object(u.a)(function(n,r){Object(u.b)(t.map(function(t){var n="JsStore_"+i.d.activeDb.name+"_"+e.name+"_"+t.name+"_Value";return o.a.get(n)})).then(function(e){for(var r={},o=0;o<t.length;o++)r[t[o].name]=e[o];n(r)}).catch(r)})},e.setAutoIncrementValue=function(e,t){var n=Object.keys(t);return Object(u.b)(n.map(function(n){var r="JsStore_"+i.d.activeDb.name+"_"+e.name+"_"+n+"_Value",u=t[n];return!0===s.a.isTransactionQuery&&(i.f.autoIncrementValues[e.name][n]=u),o.a.set(r,u)}))},e.removeSpace=function(e){return e.replace(/\s/g,"")},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(0),o=n(4),i=n(16),u=n(1),s=function(){function e(){}return e.callDbDroppedByBrowser=function(t){e.dbStatus.conStatus===r.b.Connected&&(e.isDbDeletedByBrowser=!0,!0===t&&new i.a(function(){},function(){}).deleteMetaData())},e.createTransaction=function(t,n,o){if(null===e.transaction){o=o||r.e.ReadWrite,e.transaction=e.dbConnection.transaction(t,o);var i=function(){e.transaction=null,n()};e.transaction.oncomplete=i,e.transaction.onabort=i}},e.setDbList=function(e){return o.a.set("DataBase_List",e)},e.updateDbStatus=function(t,n){void 0===n?e.dbStatus.conStatus=t:e.dbStatus={conStatus:t,lastError:n}},e.getDbList=function(){return Object(u.a)(function(e,t){o.a.get("DataBase_List").then(function(t){e(null==t?[]:t)}).catch(t)})},e.getDbVersion=function(e){return Object(u.a)(function(t,n){o.a.get("JsStore_"+e+"_Db_Version").then(function(e){t(Number(e))}).catch(n)})},e.getDbSchema=function(e){return o.a.get("JsStore_"+e+"_Schema")},e.getTable=function(t){return e.activeDb.tables.find(function(e){return e.name===t})},e.transaction=null,e.activeDbVersion=0,e.dbStatus={conStatus:r.b.NotStarted},e}()},function(e,t,n){"use strict";var r=n(6),o=n(0),i=n(5),u=function(){function e(){}return Object.defineProperty(e.prototype,"activeDb",{get:function(){return r.a.activeDb},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dbConnection",{get:function(){return r.a.dbConnection},enumerable:!0,configurable:!0}),e.prototype.getObjectFirstKey=function(e){return i.a.getObjectFirstKey(e)},e.prototype.getType=function(e){return i.a.getType(e)},e.prototype.isString=function(e){return i.a.isString(e)},e.prototype.isArray=function(e){return i.a.isArray(e)},Object.defineProperty(e.prototype,"transaction",{get:function(){return r.a.transaction},enumerable:!0,configurable:!0}),e.prototype.createTransaction=function(e,t,n){r.a.createTransaction(e,t,n)},e.prototype.regexTest=function(e){return this.regexExpression.test(e)},e.prototype.isTableExist=function(e){return this.activeDb.tables.findIndex(function(t){return t.name===e})>=0},e.prototype.getTable=function(e){return r.a.getTable(e)},e.prototype.getKeyRange=function(e,t){var n;switch(t){case o.g.Between:n=IDBKeyRange.bound(e.low,e.high,!1,!1);break;case o.g.GreaterThan:n=IDBKeyRange.lowerBound(e,!0);break;case o.g.GreaterThanEqualTo:n=IDBKeyRange.lowerBound(e);break;case o.g.LessThan:n=IDBKeyRange.upperBound(e,!0);break;case o.g.LessThanEqualTo:n=IDBKeyRange.upperBound(e);break;default:n=IDBKeyRange.only(e)}return n},e.prototype.getPrimaryKey=function(e){var t=this.getTable(e).primaryKey;return t||this.getKeyPath(e)},e.prototype.getKeyPath=function(e){return this.dbConnection.transaction([e],"readonly").objectStore(e).keyPath},e.prototype.getAllCombinationOfWord=function(e,t){if(t){for(var n=[],r=0,o=e.length;r<o;r++)n=n.concat(this.getCombination_(e[r]));return n}return this.getCombination_(e)},e.prototype.getCombination_=function(e){var t=[],n=function(e,r,o){if(o===e.length)t.push(r.join(""));else{var i=e.charAt(o);r[o]=i.toLowerCase(),n(e,r,o+1),r[o]=i.toUpperCase(),n(e,r,o+1)}};return n(e,[],0),t},e}(),s=function(){function e(e,t){this.where=e,this.checkFlag=t}return e.prototype.check=function(e){if(this.status=!0,!0===this.checkFlag)for(var t in this.where){if(!this.status)break;var n=this.where[t];if("object"==typeof n)for(var r in n){if(!this.status)break;switch(r){case o.g.In:this.checkIn(t,e[t]);break;case o.g.Like:this.checkLike(t,e[t]);break;case o.g.Regex:this.checkRegex(t,e[t]);break;case o.g.Between:case o.g.GreaterThan:case o.g.LessThan:case o.g.GreaterThanEqualTo:case o.g.LessThanEqualTo:case o.g.NotEqualTo:this.checkComparisionOp(t,e[t],r)}}else this.status=n===e[t]}return this.status},e.prototype.checkIn=function(e,t){for(var n=0,r=this.where[e][o.g.In],i=r.length;n<i;n++){if(r[n]===t){this.status=!0;break}this.status=!1}},e.prototype.checkLike=function(e,t){var n,r,i,u=this.where[e][o.g.Like].split("%");switch(u[1]?(r=u[1],n=u.length>2?o.f.Any:o.f.Last):(r=u[0],n=o.f.First),t=t.toLowerCase(),n){case o.f.Any:(i=t.indexOf(r.toLowerCase()))<0&&(this.status=!1);break;case o.f.First:((i=t.indexOf(r.toLowerCase()))>0||i<0)&&(this.status=!1);break;default:(i=t.lastIndexOf(r.toLowerCase()))<t.length-r.length&&(this.status=!1)}},e.prototype.checkRegex=function(e,t){var n=this.where[e][o.g.Regex];this.status=n.test(t)},e.prototype.checkComparisionOp=function(e,t,n){var r=this.where[e][n];switch(n){case o.g.GreaterThan:t<=r&&(this.status=!1);break;case o.g.LessThan:t>=r&&(this.status=!1);break;case o.g.LessThanEqualTo:t>r&&(this.status=!1);break;case o.g.GreaterThanEqualTo:t<r&&(this.status=!1);break;case o.g.Between:(t<r.Low||t>r.High)&&(this.status=!1);break;case o.g.NotEqualTo:t===r&&(this.status=!1)}},e}(),c=n(3);n.d(t,"a",function(){return l});var a,h=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rowAffected=0,t}return h(t,e),t.prototype.onErrorOccured=function(e,t){if(void 0===t&&(t=!1),t)e.logError(),this.error=e.get();else{var n=void 0;e.name?(n=new c.a(e.name)).message=e.message:(n=new c.a(e.target.error.name)).message=e.target.error.message,n.logError(),this.error=n.get()}},t.prototype.onExceptionOccured=function(e,t){switch(e.name){case"NotFoundError":var n=new c.a(o.d.TableNotExist,t);this.onErrorOccured(n,!0);break;default:console.error(e)}},t.prototype.getColumnInfo=function(e,t){return this.getTable(t).columns.find(function(t){return t.name===e})},t.prototype.getRegexFromLikeExpression_=function(e){var t,n,r=e.split("%");switch(r[1]?(t=r[1],n=r.length>2?o.f.Any:o.f.Last):(t=r[0],n=o.f.First),n){case o.f.First:return new RegExp("^"+t,"i");case o.f.Last:return new RegExp(t+"$","i");default:return new RegExp(""+t,"i")}},t.prototype.goToWhereLogic=function(){var e=this.getObjectFirstKey(this.query.where);if(!0===this.query.ignoreCase&&(this.query.where=this.makeQryInCaseSensitive(this.query.where)),this.objectStore.indexNames.contains(e)){var t=this.query.where[e];if("object"==typeof t){var n=Boolean(Object.keys(t).length>1||Object.keys(this.query.where).length>1);this.whereCheckerInstance=new s(this.query.where,n);var r=this.getObjectFirstKey(t);switch(r){case o.g.Like:var i=this.getRegexFromLikeExpression_(t[o.g.Like]);this.executeRegexLogic(e,i);break;case o.g.Regex:this.executeRegexLogic(e,t[o.g.Regex]);break;case o.g.In:this.executeInLogic(e,t[o.g.In]);break;case o.g.Between:case o.g.GreaterThan:case o.g.LessThan:case o.g.GreaterThanEqualTo:case o.g.LessThanEqualTo:this.executeWhereLogic(e,t,r,"next");break;case o.g.Aggregate:break;default:this.executeWhereLogic(e,t,null,"next")}}else{n=Boolean(Object.keys(this.query.where).length>1);this.whereCheckerInstance=new s(this.query.where,n),this.executeWhereLogic(e,t,null,"next")}}else{var u=null==this.getColumnInfo(e,this.tableName)?new c.a(o.d.ColumnNotExist,{ColumnName:e}):new c.a(o.d.EnableSearchOff,{ColumnName:e});this.onErrorOccured(u,!0)}},t.prototype.makeQryInCaseSensitive=function(e){var t,n,r=[];for(var i in e)switch(t=e[i],this.getType(t)){case o.c.String:r=r.concat(this.getAllCombinationOfWord(t)),e[i]={},e[i][o.g.In]=r;break;case o.c.Object:for(var u in t)if(n=t[u],this.isString(n))switch(u){case o.g.In:r=r.concat(this.getAllCombinationOfWord(n,!0));break;case o.g.Like:case o.g.Regex:break;default:r=r.concat(this.getAllCombinationOfWord(n))}e[i][o.g.In]=r}return e},t.prototype.removeSpace=function(e){return i.a.removeSpace(e)},t}(u)},function(e,t,n){"use strict";var r,o,i,u,s,c,a,h,l,f,p,y=n(0),_=n(12),d=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sorted=!1,t.isSubQuery=!1,t.isOrderWithLimit=!1,t}return d(t,e),t.prototype.removeDuplicates=function(){var e=this.results;this.results=void 0;var t=this.getPrimaryKey(this.query.from),n={};for(var r in e)n[e[r][t]]=e[r];for(var r in e=[],n)e.push(n[r]);this.results=e},t}(_.a),g=n(3),v=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return v(t,e),t.prototype.executeWhereUndefinedLogic=function(){if(this.query.order&&this.query.order.by&&!1!==this.query.order.idbSorting){if(!this.objectStore.indexNames.contains(this.query.order.by)){var e=new g.a(y.d.ColumnNotExist,{column:this.query.order.by,isOrder:!0});return void this.onErrorOccured(e,!0)}var t=this.query.order.type&&"desc"===this.query.order.type.toLowerCase()?"prev":"next";this.sorted=!0,this.cursorOpenRequest=this.objectStore.index(this.query.order.by).openCursor(null,t)}else this.cursorOpenRequest=this.objectStore.openCursor();this.skipRecord&&this.limitRecord?this.executeSkipAndLimitForNoWhere_():this.skipRecord?this.executeSkipForNoWhere_():this.limitRecord?this.executeLimitForNotWhere_():this.executeSimpleForNotWhere_(),this.cursorOpenRequest.onerror=this.onErrorOccured},t.prototype.executeSkipAndLimitForNoWhere_=function(){var e,t=this,n=!1;this.cursorOpenRequest.onsuccess=function(r){(e=r.target.result)?n&&t.results.length!==t.limitRecord?(t.results.push(e.value),e.continue()):(n=!0,e.advance(t.skipRecord)):t.onQueryFinished()}},t.prototype.executeSkipForNoWhere_=function(){var e,t=this,n=!1;this.cursorOpenRequest.onsuccess=function(r){(e=r.target.result)?n?(t.results.push(e.value),e.continue()):(n=!0,e.advance(t.skipRecord)):t.onQueryFinished()}},t.prototype.executeSimpleForNotWhere_=function(){var e;this.cursorOpenRequest.onsuccess=function(t){(e=t.target.result)?(this.results.push(e.value),e.continue()):this.onQueryFinished()}.bind(this)},t.prototype.executeLimitForNotWhere_=function(){var e,t=this;this.cursorOpenRequest.onsuccess=function(n){(e=n.target.result)&&t.results.length!==t.limitRecord?(t.results.push(e.value),e.continue()):t.onQueryFinished()}},t}(b),O=n(1),x=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),E=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),t.prototype.executeInLogic=function(e,t){var n=this;u=this.skipRecord,i=function(e){0===u?n.results.push(e):--u},o=function(){return n.whereCheckerInstance.check(s.value)},this.skipRecord&&this.limitRecord?this.executeSkipAndLimitForIn_(e,t):this.skipRecord?this.executeSkipForIn_(e,t):this.limitRecord?this.executeLimitForIn_(e,t):this.executeSimpleForIn_(e,t)},t.prototype.executeSkipAndLimitForIn_=function(e,t){var n,r=this,u=this.objectStore.index(e);Object(O.b)(t.map(function(e){return t=e,Object(O.a)(function(e,c){(n=u.openCursor(r.getKeyRange(t))).onsuccess=function(t){s=t.target.result,r.results.length!==r.limitRecord&&s?(o()&&i(s.value),s.continue()):e()},n.onerror=c});var t})).then(function(){r.onQueryFinished()}).catch(function(e){r.onErrorOccured(e)})},t.prototype.executeSkipForIn_=function(e,t){var n,r=this,u=this.objectStore.index(e);Object(O.b)(t.map(function(e){return t=e,Object(O.a)(function(e,c){(n=u.openCursor(r.getKeyRange(t))).onsuccess=function(t){(s=t.target.result)?(o()&&i(s.value),s.continue()):e()},n.onerror=c});var t})).then(function(){r.onQueryFinished()}).catch(function(e){r.onErrorOccured(e)})},t.prototype.executeLimitForIn_=function(e,t){var n,r=this,i=this.objectStore.index(e);Object(O.b)(t.map(function(e){return t=e,Object(O.a)(function(e,u){(n=i.openCursor(r.getKeyRange(t))).onsuccess=function(t){(s=t.target.result)&&r.results.length!==r.limitRecord?(o()&&r.results.push(s.value),s.continue()):e()},n.onerror=u});var t})).then(function(){r.onQueryFinished()}).catch(function(e){r.onErrorOccured(e)})},t.prototype.executeSimpleForIn_=function(e,t){var n,r=this,i=this.objectStore.index(e);Object(O.b)(t.map(function(e){return t=e,Object(O.a)(function(e,u){(n=i.openCursor(r.getKeyRange(t))).onsuccess=function(t){(s=t.target.result)?(o()&&r.results.push(s.value),s.continue()):e()},n.onerror=u});var t})).then(function(){r.onQueryFinished()}).catch(function(e){r.onErrorOccured(e)})},t}(m),D=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return D(t,e),t.prototype.executeRegexLogic=function(e,t){var n=this;h=this.skipRecord,this.regexExpression=t,a=function(e){0===h?n.results.push(e):--h},c=function(){return n.regexTest(l.key)&&n.whereCheckerInstance.check(l.value)},this.cursorOpenRequest=this.objectStore.index(e).openCursor(),this.cursorOpenRequest.onerror=this.onErrorOccured,this.skipRecord&&this.limitRecord?this.executeSkipAndLimitForRegex_():this.skipRecord?this.executeSkipForRegex_():this.limitRecord?this.executeLimitForRegex_():this.executeSimpleForRegex_()},t.prototype.executeSkipAndLimitForRegex_=function(){var e=this;this.cursorOpenRequest.onsuccess=function(t){l=t.target.result,e.results.length!==e.limitRecord&&l?(c()&&a(l.value),l.continue()):e.onQueryFinished()}},t.prototype.executeSkipForRegex_=function(){var e=this;this.cursorOpenRequest.onsuccess=function(t){(l=t.target.result)?(c()&&a(l.value),l.continue()):e.onQueryFinished()}},t.prototype.executeLimitForRegex_=function(){var e=this;this.cursorOpenRequest.onsuccess=function(t){l=t.target.result,e.results.length!==e.limitRecord&&l?(c()&&e.results.push(l.value),l.continue()):e.onQueryFinished()}},t.prototype.executeSimpleForRegex_=function(){var e=this;this.cursorOpenRequest.onsuccess=function(t){(l=t.target.result)?(c()&&e.results.push(l.value),l.continue()):e.onQueryFinished()}},t}(E),k=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return k(t,e),t.prototype.executeWhereLogic=function(e,t,n,r){var o=this;f=function(){return o.whereCheckerInstance.check(p.value)},t=n?t[n]:t,this.cursorOpenRequest=this.objectStore.index(e).openCursor(this.getKeyRange(t,n),r),this.cursorOpenRequest.onerror=this.onErrorOccured,!1===this.isOrderWithLimit?this.skipRecord&&this.limitRecord?this.executeSkipAndLimitForWhere_():this.skipRecord?this.executeSkipForWhere_():this.limitRecord?this.executeLimitForWhere_():this.executeSimpleForWhere_():this.skipRecord?this.executeSkipForWhere_():this.executeSimpleForWhere_()},t.prototype.executeSkipAndLimitForWhere_=function(){var e=this,t=!1;this.cursorOpenRequest.onsuccess=function(n){(p=n.target.result)?t&&e.results.length!==e.limitRecord?(f()&&e.results.push(p.value),p.continue()):(t=!0,p.advance(e.skipRecord)):e.onQueryFinished()}},t.prototype.executeSkipForWhere_=function(){var e=this,t=!1;this.cursorOpenRequest.onsuccess=function(n){(p=n.target.result)?t?(f()&&e.results.push(p.value),p.continue()):(t=!0,p.advance(e.skipRecord)):e.onQueryFinished()}},t.prototype.executeLimitForWhere_=function(){var e=this;this.cursorOpenRequest.onsuccess=function(t){(p=t.target.result)&&e.results.length!==e.limitRecord&&f()?(e.results.push(p.value),p.continue()):e.onQueryFinished()}},t.prototype.executeSimpleForWhere_=function(){var e=this;this.cursorOpenRequest.onsuccess=function(t){(p=t.target.result)?(f()&&e.results.push(p.value),p.continue()):e.onQueryFinished()}},t}(w),q=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return q(t,e),t.prototype.processGroupBy=function(){var e=this.query.groupBy,t=this.results,n={};if(this.results=this.query.groupBy=void 0,this.getType(e)===y.c.String)for(var r in t)n[t[r][e]]=t[r];else{var o=void 0;for(var r in t){for(var i in o="",e)o+=t[r][e[i]];n[o]=t[r]}}for(var r in t=[],n)t.push(n[r]);this.results=t},t.prototype.executeAggregateGroupBy=function(){var e=this,t=this.query.groupBy,n=this.results;this.results=void 0;var r,o,i,u,s={},c=this.query.aggregate,a=function(){var t=function(){return i=(i=s[o])?i["count("+u+")"]:0,i+=n[r][u]?1:0},a=function(){return i=(i=s[o])?i["max("+u+")"]:0,n[r][u]=n[r][u]?n[r][u]:0,i>n[r][u]?i:n[r][u]},h=function(){return i=(i=s[o])?i["min("+u+")"]:1/0,n[r][u]=n[r][u]?n[r][u]:1/0,i<n[r][u]?i:n[r][u]},l=function(){return i=(i=s[o])?i["sum("+u+")"]:0,i+=n[r][u]?n[r][u]:0},f=function(){var e=(i=s[o])?i["sum("+u+")"]:0;e+=n[r][u]?n[r][u]:0,n[r]["sum("+u+")"]=e,i=i?i["count("+u+")"]:0,i+=n[r][u]?1:0,n[r]["count("+u+")"]=i};for(var p in c){var _=c[p],d=e.getType(_),b=void 0;switch(p){case y.g.Count:b=t;break;case y.g.Max:b=a;break;case y.g.Min:b=h;break;case y.g.Sum:b=l;break;case y.g.Avg:b=f}switch(d){case y.c.String:u=_,n[r][p+"("+u+")"]=b();break;case y.c.Array:for(var g in _)u=_[g],n[r][p+"("+u+")"]=b()}}};if(this.getType(t)===y.c.String)for(r in n)o=n[r][t],a(),s[o]=n[r];else for(r in n){for(var h in o="",t)o+=n[r][t[h]];a(),s[o]=n[r]}for(var l in n=[],s)n.push(s[l]);if(c.avg)if(this.getType(c.avg)===y.c.String)for(r in n){var f=n[r]["sum("+c.avg+")"],p=n[r]["count("+c.avg+")"];n[r]["avg("+c.avg+")"]=f/p,c.count!==c.avg&&delete n[r]["count("+c.avg+")"],c.sum!==c.avg&&delete n[r]["sum("+c.avg+")"]}else{var _=this.getType(c.count)===y.c.String,d=this.getType(c.sum)===y.c.String;for(r in n)for(var h in c.avg){var b=c.avg[h],g=n[r]["sum("+b+")"],v=n[r]["count("+b+")"];n[r]["avg("+b+")"]=g/v,_&&(c.count!==b?delete n[r]["count("+b+")"]:-1===c.count.indexOf(b)&&delete n[r]["count("+b+")"]),d&&(c.sum!==b?delete n[r]["sum("+b+")"]:-1===c.sum.indexOf(b)&&delete n[r]["sum("+b+")"])}}this.results=n},t}(S),T=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),j=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.prototype.processOrderBy=function(){var e=this,t=this.query.order;if(t&&this.results.length>0&&!this.sorted&&t.by){t.type=t.type?t.type.toLowerCase():"asc";var n=t.by,r=void 0;if(null==this.query.join)r=this.getColumnInfo(n,this.query.from);else{var o=this.removeSpace(n).split(".");n=o[1],r=this.getColumnInfo(n,o[0])}null==r?this.onErrorOccured(new g.a(y.d.ColumnNotExist,{column:n,isOrder:!0}),!0):r.dataType===y.c.String?"asc"===t.type?e.results.sort(function(e,t){return e[n].localeCompare(t[n])}):e.results.sort(function(e,t){return t[n].localeCompare(e[n])}):r.dataType===y.c.Number?"asc"===t.type?e.results.sort(function(e,t){return e[n]-t[n]}):e.results.sort(function(e,t){return t[n]-e[n]}):r.dataType===y.c.DateTime&&("asc"===t.type?e.results.sort(function(e,t){return e[n].getTime()-t[n].getTime()}):e.results.sort(function(e,t){return t[n].getTime()-e[n].getTime()}))}},t.prototype.processAggregateQry=function(){var e,t=this.results,n=t.length,r={};this.results=void 0;var o=function(){var n=0;for(var r in t)n+=t[r][e]?1:0;return n},i=function(){var n=0;for(var r in t)n=n>t[r][e]?n:t[r][e];return n},u=function(){var n=1/0,r=1/0;for(var o in t)n=n<(r=t[o][e]?t[o][e]:1/0)?n:r;return n},s=function(){var n=0;for(var r in t)n+=t[r][e];return n},c=function(){var r=0;for(var o in t)r+=t[o][e];return r/n};for(var a in this.query.aggregate){var h=this.query.aggregate[a],l=this.getType(h),f=void 0;switch(a){case"count":f=o;break;case"max":f=i;break;case"min":f=u;break;case"sum":f=s;break;case"avg":f=c}switch(l){case y.c.String:r[a+"("+(e=h)+")"]=f();break;case y.c.Array:for(var p in h)r[a+"("+(e=h[p])+")"]=f()}}for(var a in r)t[0][a]=r[a];this.results=[t[0]]},t}(C),I=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),P=function(){return(P=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},L=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.joinQueryStack_=[],t.currentQueryStackIndex_=0,t.tablesFetched=[],t}return I(t,e),t.prototype.executeJoinQuery=function(){var e=this,t=this.query;this.getType(t.join)===y.c.Object?this.joinQueryStack_=[t.join]:this.joinQueryStack_=t.join;var n=t.from;new R({from:n,where:t.where},function(t){t.forEach(function(t,n){var r;e.results[n]=((r={})[e.currentQueryStackIndex_]=t,r)}),e.tablesFetched.push(n),e.startExecutionJoinLogic_()},this.onErrorOccured).execute()},t.prototype.onJoinQueryFinished_=function(){var e=this;if(null==this.error){var t=function(e,t){if(e.as)for(var n in e.as)t[e.as[n]]=t[n],delete t[n];return t},n=[],r=Object.keys(this.results[0]).length;this.results.forEach(function(o){for(var i=o[0],u=1;u<r;u++){var s=e.joinQueryStack_[u-1];i=P({},i,t(s,o[u]))}n.push(i)}),this.results=n,this.processOrderBy(),this.query[y.g.Skip]&&this.query[y.g.Limit]?(this.results.splice(0,this.query[y.g.Skip]),this.results.splice(this.query[y.g.Limit]-1,this.results.length)):this.query[y.g.Skip]?this.results.splice(0,this.query[y.g.Skip]):this.query[y.g.Limit]&&this.results.splice(this.query[y.g.Limit]-1,this.results.length),this.onSuccess(this.results)}else this.onError(this.error)},t.prototype.startExecutionJoinLogic_=function(){var e=this,t=this.joinQueryStack_[this.currentQueryStackIndex_];if(t){var n=this.getJoinTableInfo_(t.on);0,this.tablesFetched.indexOf(n.table1.table)<0&&(n={table1:n.table2,table2:n.table1}),new R({from:n.table2.table,where:t.where},function(r){e.jointables(t.type,n,r),e.tablesFetched.push(n.table2.table),++e.currentQueryStackIndex_,e.startExecutionJoinLogic_()},this.onErrorOccured).execute()}else this.onJoinQueryFinished_()},t.prototype.jointables=function(e,t,n){var r,o,i=this,u=[],s=t.table1.column,c=t.table2.column,a=this.tablesFetched.indexOf(t.table1.table),h=this.currentQueryStackIndex_+1;switch(e){case"left":o=0,i.results.forEach(function(e){r=[],n.forEach(function(t){e[a][s]===t[c]&&r.push(t)}),0===r.length&&(r=[null]),r.forEach(function(t){u[o]=e,u[o++][h]=t})});break;default:!function(){var e=0;i.results.forEach(function(t){n.forEach(function(n){t[a][s]===n[c]&&(u[e]=t,u[e++][h]=n)})})}()}this.results=u},t.prototype.getJoinTableInfo_=function(e){var t=(e=this.removeSpace(e)).split("="),n=t[0].split("."),r=t[1].split(".");return{table1:{table:n[0],column:n[1]},table2:{table:r[0],column:r[1]}}},t.prototype.checkJoinTableShema=function(e,t){var n,r=this.getTable(e.table1.table),o=this.getTable(e.table2.table);null==t.as&&(t.as={}),r.columns.every(function(r){var i=o.columns.find(function(t){return t.name===r.name&&t.name!==e.table1.column});return null==i||null!=t.as[i.name]||(n=new g.a(y.d.InvalidJoinQuery,{column:r.name,table1:e.table1.table,table2:e.table2.table}),!1)}),null!=n&&this.onErrorOccured(n,!0)},t}(j),A=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),R=function(e){function t(t,n,r){var o=e.call(this)||this;return o.onTransactionCompleted_=function(){if(null==o.error)if(o.processOrderBy(),o.error)o.onError(o.error);else{if(!0===o.isOrderWithLimit&&(o.results=o.results.slice(0,o.query.limit)),o.query.distinct){var e=[],t=o.results[0];for(var n in t)e.push(n);var r=o.getPrimaryKey(o.query.from),i=e.indexOf(r);e.splice(i,1),o.query.groupBy=e.length>0?e:null}o.query.groupBy?o.query.aggregate?o.executeAggregateGroupBy():o.processGroupBy():o.query.aggregate&&o.processAggregateQry(),o.onSuccess(o.results)}else o.onError(o.error)},o.onError=r,o.onSuccess=n,o.query=t,o.skipRecord=t.skip,o.limitRecord=t.limit,o.tableName=t.from,t.order&&t.order.by&&null!=t.limit&&(o.isOrderWithLimit=!0),o}return A(t,e),t.prototype.execute=function(){try{null==this.query.join?null!=this.query.where?(this.initTransaction_(),this.isArray(this.query.where)?this.processWhereArrayQry():this.processWhere_()):(this.initTransaction_(),this.executeWhereUndefinedLogic()):this.executeJoinQuery()}catch(e){this.onExceptionOccured(e,{TableName:this.query.from})}},t.prototype.processWhereArrayQry=function(){var e=this;this.isArrayQry=!0;var t,n=this.query.where,r=this.getPrimaryKey(this.query.from),o=!0,i=[],u=function(){if(t===y.g.And){var u=function(){var t=[];e.results.forEach(function(e){var n;n=e[r],i.findIndex(function(e){return e[r]===n})>=0&&t.push(e)}),i=t,t=null};i.length>0?u():!0===o?i=e.results:u()}else i.length>0?(e.results=i.concat(e.results),e.removeDuplicates(),i=e.results):i=e.results;o=!1,n.length>0?(e.results=[],s()):(e.results=i,!0===e.isSubQuery&&e.onTransactionCompleted_())},s=function(){e.query.where=n.shift(),e.query.where[y.g.Or]&&1===Object.keys(e.query.where).length?(t=y.g.Or,e.query.where=e.query.where[y.g.Or],e.onWhereArrayQrySuccess=u):(t=y.g.And,e.onWhereArrayQrySuccess=u),e.processWhere_()};s()},t.prototype.onQueryFinished=function(){!0===this.isOr?this.orQuerySuccess_():!0===this.isArrayQry?this.onWhereArrayQrySuccess():!0!==this.isTransaction&&!0!==this.isSubQuery||this.onTransactionCompleted_()},t.prototype.initTransaction_=function(){this.createTransaction([this.tableName],this.onTransactionCompleted_,y.e.ReadOnly),this.objectStore=this.transaction.objectStore(this.tableName)},t.prototype.processWhere_=function(){this.query.where.or&&this.processOrLogic_(),this.goToWhereLogic()},t.prototype.orQueryFinish_=function(){this.isOr=!1,this.results=this.orInfo.results,this.orInfo=void 0,this.removeDuplicates(),this.onQueryFinished()},t.prototype.orQuerySuccess_=function(){if(this.orInfo.results=this.orInfo.results.concat(this.results),!this.query.limit||this.query.limit>this.orInfo.results.length){this.results=[];var e=this.getObjectFirstKey(this.orInfo.orQuery);if(null!=e){var t={};t[e]=this.orInfo.orQuery[e],delete this.orInfo.orQuery[e],this.query.where=t,this.goToWhereLogic()}else this.orQueryFinish_()}else this.orQueryFinish_()},t.prototype.processOrLogic_=function(){this.isOr=!0,this.orInfo={orQuery:this.query.where.or,results:[]},delete this.query.where.or},t}(L);n.d(t,"a",function(){return R})},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var r=function(){function e(){}return e.isLogEnabled=!1,e.isRuningInWorker=!1,e}()},function(e,t,n){"use strict";var r=n(2),o=n(8),i=n(19),u=n(14),s=n(18),c=n(13),a=n(20),h=n(3),l=n(0),f=n(9),p=n(4),y=function(){return function(e){this.name=e.name,this.autoIncrement=null!=e.autoIncrement&&e.autoIncrement,this.primaryKey=null!=e.primaryKey&&e.primaryKey,this.unique=null!=e.unique&&e.unique,this.notNull=null!=e.notNull&&e.notNull,this.dataType=null!=e.dataType?e.dataType:e.autoIncrement?"number":null,this.default=e.default,this.multiEntry=null!=e.multiEntry&&e.multiEntry,this.enableSearch=null==e.enableSearch||e.enableSearch,this.keyPath=e.keyPath}}(),_=function(){return function(e){for(var t in this.columns=[],this.name=e.name,this.version=null==e.version?1:e.version,e.columns){var n={name:t};for(var r in e.columns[t]){var o=e.columns[t][r];switch(r){case"primaryKey":case"autoIncrement":case"unique":case"dataType":case"enableSearch":case"keyPath":case"multiEntry":case"default":case"notNull":n[r]=o}}this.columns.push(new y(n))}}}(),d=function(){return function(e){var t=this;this.tables=[],this.name=e.name,e.tables.forEach(function(e){t.tables.push(new _(e))})}}(),b=n(1),g=function(){function e(e){this.columns=[],this.requireDelete=!1,this.requireCreation=!1,this.name=e.name,this.version=e.version,this.columns=e.columns,this.setPrimaryKey_()}return e.prototype.createMetaData=function(e){var t=this;return Object(b.a)(function(n){t.callback_=n,t.setRequireDelete_(e),t.setDbVersion_(e)})},e.prototype.setPrimaryKey_=function(){var e=this;this.columns.every(function(t){return e.primaryKey=t.primaryKey?t.name:"",!t.primaryKey})},e.prototype.setRequireDelete_=function(e){var t=this;p.a.get("JsStore_"+e+"_"+this.name+"_Version").then(function(e){null==e?t.requireCreation=!0:e<t.version&&(t.requireDelete=!0)})},e.prototype.setDbVersion_=function(e){var t=this;r.d.activeDbVersion=r.d.activeDbVersion>this.version?r.d.activeDbVersion:this.version,p.a.set("JsStore_"+e+"_Db_Version",r.d.activeDbVersion),p.a.set("JsStore_"+e+"_"+this.name+"_Version",r.d.activeDbVersion).then(function(){t.version=r.d.activeDbVersion,t.callback_(t)})},e}(),v=function(){function e(e){this.tables=[],this.dbName=e.name,this.tables=e.tables}return e.prototype.createMetaData=function(){var e=this;return Object(b.b)(this.tables.map(function(t){return new g(t).createMetaData(e.dbName)}))},e}(),m=n(5);n.d(t,"a",function(){return O});var O=function(){function e(e){this.onQueryFinished=e,r.f.autoIncrementValues={}}return e.prototype.checkConnectionAndExecuteLogic=function(e){var t=this;switch(h.a.log("request executing:"+e.name),e.name){case l.a.InitDb:case l.a.IsDbExist:case l.a.GetDbVersion:case l.a.GetDbList:case l.a.GetDbSchema:case l.a.Get:case l.a.Set:case l.a.ChangeLogStatus:case l.a.Terminate:case l.a.OpenDb:case l.a.InitKeyStore:case l.a.CloseDb:this.executeLogic_(e);break;default:switch(this.dbStatus_.conStatus){case l.b.Connected:this.executeLogic_(e);break;case l.b.Closed:!0===this.isDbDeletedByBrowser_?this.initDb_(null,function(){t.isDbDeletedByBrowser_=!1,t.checkConnectionAndExecuteLogic(e)},e.onError):this.initDb_(this.activeDb_,function(){t.checkConnectionAndExecuteLogic(e)},e.onError)}}},e.prototype.changeLogStatus_=function(e,t,n){f.a.isLogEnabled=e,t()},e.prototype.returnResult_=function(e){!0===f.a.isRuningInWorker?self.postMessage(e):this.onQueryFinished(e)},e.prototype.executeLogic_=function(t){var n=this,r=function(e){n.returnResult_({returnedValue:e})},o=function(e){n.returnResult_({errorDetails:e,errorOccured:!0})};switch(e.isTransactionQuery=t.name===l.a.Transaction,t.name){case l.a.OpenDb:this.openDb_(t.query,r,o);break;case l.a.Select:this.select_(t.query,r,o);break;case l.a.Insert:this.insert_(t.query,r,o);break;case l.a.Update:this.update_(t.query,r,o);break;case l.a.Remove:this.remove_(t.query,r,o);break;case l.a.IsDbExist:this.isDbExist_(t.query,r,o);break;case l.a.GetDbVersion:this.getDbVersion_(t.query).then(r).catch(o);break;case l.a.GetDbList:this.getDbList_().then(r).catch(o);break;case l.a.GetDbSchema:this.getDbSchema_(t.query).then(r).catch(o);break;case l.a.InitDb:!0===this.isDbDeletedByBrowser_?this.initDb_(null,function(){n.isDbDeletedByBrowser_=!1,r()},o):this.initDb_(t.query,r,o);break;case l.a.Clear:this.clear_(t.query,r,o);break;case l.a.DropDb:this.dropDb_(r,o);break;case l.a.Count:this.count_(t.query,r,o);break;case l.a.BulkInsert:this.bulkInsert_(t.query,r,o);break;case l.a.Get:this.get_(t.query).then(r).catch(o);break;case l.a.Set:this.set_(t.query).then(r).catch(o);break;case l.a.ChangeLogStatus:this.changeLogStatus_(t.query,r,o);break;case l.a.Transaction:this.transaction_(t.query,r,o);break;case l.a.CloseDb:case l.a.Terminate:this.terminate_(r,o);break;case l.a.InitKeyStore:this.initKeyStore_(r);break;default:console.error("The Api:-"+t.name+" does not support.")}},e.prototype.openDb_=function(e,t,n){var r=this;null!=this.activeDb_&&this.activeDb_.name===e?this.processCreateDb(this.activeDb_).then(t).catch(n):this.getDbSchema_(e).then(function(o){null!=o?r.processCreateDb(o).then(t).catch(n):n(new h.a(l.d.DbNotExist,{dbName:e}).get())}).catch(n)},e.prototype.initKeyStore_=function(e){p.a.init(),e()},e.prototype.getDbSchema_=function(e){return r.d.getDbSchema(e)},e.prototype.terminate_=function(e,t){var n=this;p.a.close().then(function(){n.closeDb_(),e()})},Object.defineProperty(e.prototype,"isDbDeletedByBrowser_",{get:function(){return r.d.isDbDeletedByBrowser},set:function(e){r.d.isDbDeletedByBrowser=e},enumerable:!0,configurable:!0}),e.prototype.getDbList_=function(){return r.d.getDbList()},Object.defineProperty(e.prototype,"activeDb_",{get:function(){return r.d.activeDb},set:function(e){r.d.activeDb=e},enumerable:!0,configurable:!0}),e.prototype.closeDb_=function(){r.d.dbStatus.conStatus===l.b.Connected&&(r.d.dbStatus.conStatus=l.b.ClosedByJsStore,r.d.dbConnection.close())},e.prototype.dropDb_=function(e,t){this.closeDb_(),new r.c(e,t).deleteDb()},e.prototype.update_=function(e,t,n){var o=new r.f(l.a.Update,e);(o.checkAndModify(),null==o.error)?new c.a(e,t,n).execute():n(o.error)},e.prototype.insert_=function(e,t,n){var o=new r.f(l.a.Insert,e);o.checkAndModify().then(function(){e=o.query,new u.a(e,t,n).execute()}).catch(n)},e.prototype.bulkInsert_=function(e,t,n){var o=new r.f(l.a.BulkInsert,e);(o.checkAndModify(),null==o.error)?new r.a(e,t,n).execute():n(o.error)},e.prototype.remove_=function(e,t,n){var o=new r.f(l.a.Remove,e);(o.checkAndModify(),null==o.error)?new s.a(e,t,n).execute():n(o.error)},e.prototype.select_=function(e,t,n){var i=new r.f(l.a.Select,e);(i.checkAndModify(),null==i.error)?new o.a(e,t,n).execute():n(i.error)},e.prototype.count_=function(e,t,n){var o=new r.f(l.a.Count,e);(o.checkAndModify(),null==o.error)?new i.a(e,t,n).execute():n(o.error)},e.prototype.processCreateDb=function(e){var t=this;return Object(b.a)(function(n,o){new v(e).createMetaData().then(function(i){t.activeDb_=e,new r.e(function(r){t.activeDb_=e,p.a.set("JsStore_"+e.name+"_Schema",e),n(r)},o).execute(i)})})},e.prototype.initDb_=function(e,t,n){var r=this;null==e?this.processCreateDb(this.activeDb_):(this.closeDb_(),this.getDbVersion_(e.name).then(function(o){r.activeDbVersion_=o||1,r.processCreateDb(new d(e)).then(t).catch(n)}))},Object.defineProperty(e.prototype,"activeDbVersion_",{get:function(){return r.d.activeDbVersion},set:function(e){r.d.activeDbVersion=e},enumerable:!0,configurable:!0}),e.prototype.getDbVersion_=function(e){return r.d.getDbVersion(e)},Object.defineProperty(e.prototype,"dbStatus_",{get:function(){return r.d.dbStatus},enumerable:!0,configurable:!0}),e.prototype.clear_=function(e,t,n){new r.b(e,t,n).execute()},e.prototype.getType_=function(e){return m.a.getType(e)},e.prototype.isDbExist_=function(e,t,n){if(this.dbStatus_.conStatus!==l.b.UnableToStart)this.getType_(e)===l.c.String?this.getDbVersion_(e).then(function(e){t(Boolean(e))}):this.getDbVersion_(e.dbName).then(function(n){t(e.table.version<=n)});else{var r={message:null,type:this.dbStatus_.lastError};switch(r.type){case l.d.IndexedDbBlocked:r.message="IndexedDB is blocked";break;case l.d.IndexedDbUndefined:r.message="IndexedDB is not supported"}n(r)}},e.prototype.get_=function(e){return p.a.get(e)},e.prototype.set_=function(e){return p.a.set(e.key,e.value)},e.prototype.transaction_=function(e,t,n){new a.a(e,t,n).execute()},e.isTransactionQuery=!1,e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(0),o=n(6),i=n(3),u=n(5),s=n(13),c=n(14),a=n(1),h=function(){function e(e,t){this.isTransaction=!1,this.api=e,this.query=t}return e.prototype.checkAndModify=function(){var e=this;return Object(a.a)(function(t,n){var o=function(){null==e.error?t():n(e.error)};switch(e.api){case r.a.Select:case r.a.Remove:case r.a.Count:e.checkFetchQuery_(),o();break;case r.a.Insert:e.checkInsertQuery_().then(o).catch(function(t){e.error=t,o()});break;case r.a.Update:e.checkUpdateQuery_(),o();break;case r.a.BulkInsert:e.checkBulkInsert_()}})},e.prototype.isInsertQryValid_=function(e){var t,n=this.getTable_(this.query.into);if(n)switch(this.getType_(this.query.values)){case r.c.Array:break;case r.c.Null:t=new i.a(r.d.NoValueSupplied);break;default:t=new i.a(r.d.NotArray)}else t=new i.a(r.d.TableNotExist,{tableName:this.query.into});return e(n),null==t?null:t.get()},e.prototype.checkBulkInsert_=function(){this.error=this.isInsertQryValid_(function(){})},e.prototype.checkInsertQuery_=function(){var e=this;return Object(a.a)(function(t,n){var r,o=e.isInsertQryValid_(function(e){r=e});if(null==o)if(!0===e.query.skipDataCheck)t();else{var i=new c.b(r,e.query.values);i.checkAndModifyValues().then(function(){e.query.values=i.values,t()}).catch(n)}else n(o)})},e.prototype.checkUpdateQuery_=function(){this.error=new s.b(this.getTable_(this.query.in)).check(this.query.set,this.query.in),null==this.error&&null!=this.query.where&&(this.checkForNullInWhere_(),null==this.error&&this.addGreatAndLessToNotOp_())},e.prototype.checkForNullInWhere_=function(){for(var e in this.query.where)if(null==this.query.where[e])return void(this.error=new i.a(r.d.NullValueInWhere,{column:e}).get())},e.prototype.checkFetchQuery_=function(){!0===this.isTableExist_(this.query.from)?null!=this.query.where&&(this.checkForNullInWhere_(),null==this.error&&this.addGreatAndLessToNotOp_()):this.error=new i.a(r.d.TableNotExist,{tableName:this.query.from}).get()},e.prototype.isTableExist_=function(e){return this.activeDb_.tables.findIndex(function(t){return t.name===e})>=0},Object.defineProperty(e.prototype,"activeDb_",{get:function(){return o.a.activeDb},enumerable:!0,configurable:!0}),e.prototype.getTable_=function(e){return o.a.getTable(e)},e.prototype.addGreatAndLessToNotOp_=function(){var e=this.query.where,t=function(e,t){return t.findIndex(function(t){return null!=e[t][r.g.NotEqualTo]})>=0},n=function(e,t){var n;return t.forEach(function(t){null!=(n=e[t])[r.g.NotEqualTo]&&(e[t][r.g.GreaterThan]=n[r.g.NotEqualTo],void 0===e[r.g.Or]?(e[r.g.Or]={},e[r.g.Or][t]={}):void 0===e[r.g.Or][t]&&(e[r.g.Or][t]={}),e[r.g.Or][t][r.g.LessThan]=n[r.g.NotEqualTo],delete e[t][r.g.NotEqualTo])}),e};switch(this.getType_(e)){case r.c.Object:var o=Object.keys(e);if(t(e,o))if(1===o.length)this.query.where=n(e,o);else{var i=[];o.forEach(function(t){var r;i.push(n(((r={})[t]=e[t],r),[t]))}),this.query.where=i}break;default:var u=[];e.forEach(function(e){var r=Object.keys(e);t(e,r)&&(e=n(e,r)),u.push(e)}),this.query.where=u}},e.prototype.getType_=function(e){return u.a.getType(e)},e.autoIncrementValues={},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r,o=n(7),i=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.results=[],t}return i(t,e),t.prototype.onQueryFinished=function(){},t}(o.a)},function(e,t,n){"use strict";var r,o=n(7),i=n(0),u=n(5),s=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(e,t){for(var n in e)if(u.a.getType(e[n])!==i.c.Object)t[n]=e[n];else for(var r in e[n]){switch(r){case"+":t[n]+=e[n][r];break;case"-":t[n]-=e[n][r];break;case"*":t[n]*=e[n][r];break;case"/":t[n]/=e[n][r];break;default:t[n]=e[n]}break}return t},a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onTransactionCompleted_=function(){t.error?t.onError(t.error):t.onSuccess(t.rowAffected)},t}return s(t,e),t.prototype.initTransaction=function(){this.createTransaction([this.query.in],this.onTransactionCompleted_),this.objectStore=this.transaction.objectStore(this.query.in)},t.prototype.onQueryFinished=function(){!0===this.isTransaction&&this.onTransactionCompleted_()},t}(o.a),h=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t.prototype.executeWhereUndefinedLogic=function(){var e,t=this,n=this.objectStore.openCursor();n.onsuccess=function(n){(e=n.target.result)?(e.update(c(t.query.set,e.value)),++t.rowAffected,e.continue()):t.onQueryFinished()},n.onerror=this.onErrorOccured},t}(a),f=n(1),p=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return p(t,e),t.prototype.executeInLogic=function(e,t){var n,r,o=this,i=this.objectStore.index(e);Object(f.b)(t.map(function(e){return t=e,Object(f.a)(function(e,u){(r=i.openCursor(o.getKeyRange(t))).onsuccess=function(t){(n=t.target.result)?(o.whereCheckerInstance.check(n.value)&&(n.update(c(o.query.set,n.value)),++o.rowAffected),n.continue()):e()},r.onerror=u});var t})).then(function(){o.onQueryFinished()}).catch(function(e){o.onErrorOccured(e)})},t}(l),_=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return _(t,e),t.prototype.executeRegexLogic=function(e,t){var n,r=this;this.regexExpression=t;var o=this.objectStore.index(e).openCursor();o.onerror=this.onErrorOccured,o.onsuccess=function(e){(n=e.target.result)?(r.regexTest(n.key)&&r.whereCheckerInstance.check(n.value)&&(n.update(c(r.query.set,n.value)),++r.rowAffected),n.continue()):r.onQueryFinished()}},t}(y),b=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.prototype.executeWhereLogic=function(e,t,n){var r,o,i=this;t=n?t[n]:t,(o=this.objectStore.index(e).openCursor(this.getKeyRange(t,n))).onsuccess=function(e){(r=e.target.result)?(i.whereCheckerInstance.check(r.value)&&(r.update(c(i.query.set,r.value)),++i.rowAffected),r.continue()):i.onQueryFinished()},o.onerror=this.onErrorOccured},t}(d),v=n(8),m=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),O=function(e){function t(t,n,r){var o=e.call(this)||this;return o.onSuccess=n,o.onError=r,o.query=t,o.tableName=o.query.in,o}return m(t,e),t.prototype.execute=function(){try{this.initTransaction(),null!=this.query.where?this.query.where.or||this.isArray(this.query.where)?this.executeComplexLogic_():this.goToWhereLogic():this.executeWhereUndefinedLogic()}catch(e){this.onExceptionOccured.call(this,e,{tableName:this.query.in})}},t.prototype.executeComplexLogic_=function(){var e=this,t=new v.a({from:this.query.in,where:this.query.where,ignoreCase:this.query.ignoreCase},function(t){var n,r,o=e.getPrimaryKey(e.query.in),u=[];t.forEach(function(e){u.push(e[o])}),t=null;var s=((n={})[o]=((r={})[i.g.In]=u,r),n);e.query.ignoreCase=null,e.query[i.g.Where]=s,e.initTransaction(),e.goToWhereLogic()},this.onError);t.isSubQuery=!0,t.execute()},t}(g),x=n(3),E=function(){function e(e){this.table=e}return e.prototype.check=function(e,t){var n=this,r=null;return typeof e===i.c.Object?this.table?this.table.columns.every(function(t){return null===r&&(t.name in e&&(r=n.checkByColumn_(t,e[t.name])),!0)}):r=new x.a(i.d.TableNotExist,{tableName:t}):r=new x.a(i.d.NotObject),null!=r?r.get():null},e.prototype.isNull_=function(e){return u.a.isNull(e)},e.prototype.getType_=function(e){return u.a.getType(e)},e.prototype.checkByColumn_=function(e,t){var n=null;!0===e.notNull&&this.isNull_(t)&&(n=new x.a(i.d.NullValue,{ColumnName:e.name}));var r=this.getType_(t),o=null!=t;if(e.dataType&&o&&r!==e.dataType&&"object"!==r&&(n=new x.a(i.d.WrongDataType,{ColumnName:e.name})),o&&"object"===r)for(var u=["+","-","*","/"],s=0,c=Object.keys(t);s<c.length;s++){var a=c[s];u.indexOf(a)<0&&e.dataType&&r!==e.dataType&&(n=new x.a(i.d.WrongDataType,{ColumnName:e.name}));break}return n},e}();n.d(t,"a",function(){return O}),n.d(t,"b",function(){return E})},function(e,t,n){"use strict";var r,o=n(7),i=n(1),u=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),s=function(e){function t(t,n,r){var o=e.call(this)||this;return o.valuesAffected_=[],o.onTransactionCompleted_=function(){null==o.error?o.onSuccess(!0===o.query.return?o.valuesAffected_:o.rowAffected):o.onError(o.error)},o.onError=r,o.query=t,o.onSuccess=n,o.tableName=o.query.into,o}return u(t,e),t.prototype.execute=function(){try{this.insertData_(this.query.values)}catch(e){this.onExceptionOccured(e,{tableName:this.tableName})}},t.prototype.onQueryFinished_=function(){!0===this.isTransaction&&this.onTransactionCompleted_()},t.prototype.insertData_=function(e){var t,n,r=this,o=!0===this.query.upsert?"put":"add";n=!0===this.query.return?function(e){r.valuesAffected_.push(e)}:function(e){++r.rowAffected},this.createTransaction([this.query.into],this.onTransactionCompleted_),t=this.transaction.objectStore(this.query.into),Object(i.b)(e.map(function(e){return Object(i.a)(function(r,i){var u=t[o](e);u.onerror=i,u.onsuccess=function(){n(e),r()}})})).then(function(){r.onQueryFinished_()}).catch(function(e){r.transaction.abort(),r.onErrorOccured(e)})},t}(o.a),c=n(5),a=n(0),h=n(3),l=function(){function e(e,t){this.errorOccured=!1,this.autoIncrementValue={},this.table=e,this.autoIncrementValue=t}return e.prototype.checkAndModifyValue=function(e){var t=this;return this.value=e,this.table.columns.every(function(e){return t.checkAndModifyColumnValue_(e),!t.errorOccured}),this.errorOccured},e.prototype.isNull_=function(e){return c.a.isNull(e)},e.prototype.getType_=function(e){return c.a.getType(e)},e.prototype.checkNotNullAndDataType_=function(e){e.notNull&&this.isNull_(this.value[e.name])?this.onValidationError_(a.d.NullValue,{ColumnName:e.name}):e.dataType&&!this.isNull_(this.value[e.name])&&this.getType_(this.value[e.name])!==e.dataType&&this.onValidationError_(a.d.WrongDataType,{ColumnName:e.name})},e.prototype.checkAndModifyColumnValue_=function(e){var t=this.value[e.name];e.autoIncrement?this.isNull_(t)?this.value[e.name]=++this.autoIncrementValue[e.name]:this.getType_(t)===a.c.Number&&t>this.autoIncrementValue[e.name]&&(this.autoIncrementValue[e.name]=t):e.default&&this.isNull_(t)&&(this.value[e.name]=e.default),this.checkNotNullAndDataType_(e)},e.prototype.onValidationError_=function(e,t){this.errorOccured=!0,this.log=new h.a(e,t)},e}(),f=n(10),p=n(11),y=function(){function e(e,t){this.table=e,this.values=t}return e.prototype.checkAndModifyValues=function(){var e=this;return Object(i.a)(function(t,n){var r=function(r){e.valueCheckerObj=new l(e.table,r),e.startChecking().then(t).catch(n)};!1===f.a.isTransactionQuery?c.a.getAutoIncrementValues(e.table).then(function(e){r(e)}).catch(n):r(p.a.autoIncrementValues[e.table.name])})},e.prototype.startChecking=function(){var e=this;return Object(i.a)(function(t,n){var r=!1;(e.values.every(function(t){return!(r=e.valueCheckerObj.checkAndModifyValue(t))}),r)&&n(e.valueCheckerObj.log.get());var o=c.a.setAutoIncrementValue(e.table,e.valueCheckerObj.autoIncrementValue);!1===f.a.isTransactionQuery?o.then(t).catch(n):t()})},e}();n.d(t,"a",function(){return s}),n.d(t,"b",function(){return y})},function(e,t,n){"use strict";var r,o=n(6),i=n(0);!function(e){e.Connected="connected",e.Closed="closed",e.NotStarted="not_connected"}(r||(r={}));var u,s=function(){function e(){}return e.callDbDroppedByBrowser=function(){e.isDbDeletedByBrowser=e.dbStatus.conStatus===r.Connected},e.createTransaction=function(t,n,r){null===e.transaction&&(r=r||"readwrite",e.transaction=e.dbConnection.transaction(t,r),e.transaction.oncomplete=function(){e.transaction=null,n()},e.transaction.ontimeout=function(){this._transaction=null,console.error("transaction timed out")})},e.transaction=null,e.dbStatus={conStatus:r.NotStarted},e}(),c=function(){function e(){}return e.setDbType=function(){indexedDB||(indexedDB=self.mozIndexedDB||self.webkitIndexedDB||self.msIndexedDB),indexedDB?(IDBTransaction=IDBTransaction||self.webkitIDBTransaction||self.msIDBTransaction,self.IDBKeyRange=self.IDBKeyRange||self.webkitIDBKeyRange||self.msIDBKeyRange):o.a.dbStatus={conStatus:i.b.UnableToStart,lastError:i.d.IndexedDbUndefined}},e.updateDbStatus=function(e,t){void 0===t?s.dbStatus.conStatus=e:s.dbStatus={conStatus:e,lastError:t}},e}(),a=function(){function e(){this.results=null,this.errorOccured=!1,this.errorCount=0}return e.prototype.onErrorOccured=function(e){++this.errorCount,1===this.errorCount&&null!=this.onError&&this.onError(e.target.error),console.error(e)},e}(),h=(u=function(e,t){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}u(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t,n,r){var o=e.call(this)||this;return o.rowAffected=0,o.key=t,o.onSuccess=n,o.onError=r,o}return h(t,e),t.prototype.execute=function(){var e=this;this.initTransaction();var t,n,r;this.errorOccured||(t=v.columnName,n=this.key,(r=e.objectStore.index(t).openCursor(IDBKeyRange.only(n))).onerror=function(t){e.errorOccured=!0,e.onErrorOccured(t)},r.onsuccess=function(t){var n=t.target.result;n&&(n.delete(),++e.rowAffected,n.continue())})},t.prototype.initTransaction=function(){s.createTransaction([v.tableName],this.onTransactionCompleted.bind(this)),this.objectStore=s.transaction.objectStore(v.tableName)},t.prototype.onTransactionCompleted=function(){!1===this.errorOccured&&this.onSuccess(this.rowAffected)},t}(a),f=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=function(e){function t(t,n,r){var o=e.call(this)||this;o.onTransactionCompleted_=function(){!1===o.errorOccured&&o.onSuccess&&o.onSuccess(null)};try{o.query=t,o.onSuccess=n,o.onError=r}catch(e){console.error(e)}return o}return f(t,e),t.prototype.execute=function(){var e,t=this,n=function(){t.objectStore.add(t.query).onerror=function(e){t.errorOccured=!0,t.onErrorOccured(e)}};this.initTransaction(),(e=t.objectStore.index(v.columnName).openCursor(IDBKeyRange.only(t.query[v.columnName]))).onsuccess=function(e){var r=e.target.result;r?r.update(t.query):n()},e.onerror=function(e){t.errorOccured=!0,t.onErrorOccured(e)}},t.prototype.initTransaction=function(){s.createTransaction([v.tableName],this.onTransactionCompleted_),this.objectStore=s.transaction.objectStore(v.tableName)},t}(a),y=function(){return function(e,t,n){var u=self.indexedDB.open(e,1);s.isDbDeletedByBrowser=!1,u.onerror=function(e){"InvalidStateError"===e.target.error.name&&(o.a.dbStatus={conStatus:i.b.UnableToStart,lastError:i.d.IndexedDbBlocked}),null!=n&&n(e.target.error)},u.onsuccess=function(e){s.dbStatus.conStatus=r.Connected,s.dbConnection=u.result,s.dbConnection.onclose=function(){s.callDbDroppedByBrowser(),c.updateDbStatus(r.Closed,i.d.ConnectionClosed)},s.dbConnection.onversionchange=function(e){null===e.newVersion&&(e.target.close(),s.callDbDroppedByBrowser(),c.updateDbStatus(r.Closed,i.d.ConnectionClosed))},s.dbConnection.onerror=function(e){s.dbStatus.lastError="Error occured in connection :"+e.target.result},s.dbConnection.onabort=function(e){s.dbStatus={conStatus:r.Closed,lastError:"Connection aborted"}},null!=t&&t()},u.onupgradeneeded=function(e){e.target.result.createObjectStore(v.tableName,{keyPath:"Key"}).createIndex("Key","Key",{unique:!0})}}}(),_=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),d=function(e){function t(t,n,r){var o=e.call(this)||this;return o.onTransactionCompleted_=function(){!1===o.errorOccured&&o.onSuccess(o.results)},o.key=t,o.onSuccess=n,o.onError=r,o}return _(t,e),t.prototype.execute=function(){var e,t,n,r=this;this.initTransaction_(),e=v.columnName,t=this.key,(n=r.objectStore.index(e).openCursor(IDBKeyRange.only(t))).onerror=function(e){r.errorOccured=!0,r.onErrorOccured(e)},n.onsuccess=function(e){var t=e.target.result;t&&(r.results=t.value.Value)}},t.prototype.initTransaction_=function(){s.createTransaction([v.tableName],this.onTransactionCompleted_,"readonly"),this.objectStore=s.transaction.objectStore(v.tableName)},t}(a),b=function(){function e(e){void 0===e&&(e=null),this.onQueryFinished=e}return e.prototype.checkConnectionAndExecuteLogic=function(e){var t=this;if("init_db"===e.name)this.executeLogic(e);else switch(s.dbStatus.conStatus){case r.Connected:this.executeLogic(e);break;case r.NotStarted:setTimeout(function(){t.checkConnectionAndExecuteLogic(e)},100);break;case r.Closed:s.isDbDeletedByBrowser&&this.createDb(function(){s.isDbDeletedByBrowser=!1,t.checkConnectionAndExecuteLogic(e)},function(e){console.error(e)})}},e.prototype.returnResult=function(e){this.onQueryFinished(e)},e.prototype.executeLogic=function(e){var t=this,n=function(e){t.returnResult({returnedValue:e})},r=function(e){t.returnResult({errorDetails:e,errorOccured:!0})};switch(e.name){case"get":this.get(e.query,n,r);break;case"set":this.set(e.query,n,r);break;case"remove":this.remove(e.query,n,r);break;case"init_db":this.createDb(n,r);break;case"close_db":this.closeDb(n,r)}},e.prototype.set=function(e,t,n){new p(e,t,n).execute()},e.prototype.remove=function(e,t,n){new l(e,t,n).execute()},e.prototype.get=function(e,t,n){new d(e,t,n).execute()},e.prototype.createDb=function(e,t){new y("KeyStore",e,t)},e.prototype.closeDb=function(e,t){s.dbStatus.conStatus===r.Connected&&(s.dbStatus.conStatus=r.Closed,s.dbConnection.close()),e()},e}(),g=n(1),v=function(){function e(){}return e.prcoessQuery=function(e){var t=this;return Object(g.a)(function(n,r){e.onSuccess=function(e){n(e)},e.onError=function(e){r(e)},t.requestQueue.push(e),t.executeCode()})},e.executeCode=function(){if(!this.isCodeExecuting&&this.requestQueue.length>0){this.isCodeExecuting=!0;var e={name:this.requestQueue[0].name,query:this.requestQueue[0].query};new b(this.onQueryFinished.bind(this)).checkConnectionAndExecuteLogic(e)}},e.onQueryFinished=function(e){var t=this.requestQueue.shift();this.isCodeExecuting=!1,e.errorOccured?t.onError(e.errorDetails):t.onSuccess(e.returnedValue),this.executeCode()},e.requestQueue=[],e.tableName="LocalStore",e.columnName="Key",e.isCodeExecuting=!1,e}();n.d(t,"a",function(){return m});var m=function(){function e(){}return e.init=function(){c.setDbType(),indexedDB&&v.prcoessQuery({name:"init_db",query:null})},e.close=function(){return v.prcoessQuery({name:"close_db",query:null})},e.get=function(e){return v.prcoessQuery({name:"get",query:e})},e.set=function(e,t){var n={Key:e,Value:t};return v.prcoessQuery({name:"set",query:n})},e.remove=function(e){return v.prcoessQuery({name:"remove",query:e})},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r,o=n(4),i=n(0),u=n(3),s=n(17),c=n(1),a=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),h=function(e){function t(t,n){var r=e.call(this)||this;return r.onSuccess_=t,r.onError_=n,r}return a(t,e),t.prototype.deleteMetaData=function(){var e=this;return Object(c.a)(function(t,n){o.a.remove("JsStore_"+e.dbName+"_Db_Version"),e.activeDb.tables.forEach(function(t){o.a.remove("JsStore_"+e.dbName+"_"+t.name+"_Version"),t.columns.forEach(function(n){n.autoIncrement&&o.a.remove("JsStore_"+e.dbName+"_"+t.name+"_"+n.name+"_Value")})}),e.getDbList().then(function(r){r.splice(r.indexOf(e.dbName),1),e.setDbList(r).then(function(){o.a.remove("JsStore_"+e.dbName+"_Schema").then(t).catch(n)})})})},t.prototype.deleteDb=function(){var e=this;setTimeout(function(){var t=indexedDB.deleteDatabase(e.dbName);t.onblocked=function(){null!=e.onError_&&e.onError_(new u.a(i.d.DbBlocked).get())},t.onerror=function(t){null!=e.onError_&&e.onError_(event.target.error)},t.onsuccess=function(){e.deleteMetaData().then(function(){e.onSuccess_(),e.dbStatus.conStatus=i.b.Closed}).catch(e.onError_)}},100)},t}(s.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(6),o=n(0),i=n(5),u=function(){function e(){}return Object.defineProperty(e.prototype,"dbName",{get:function(){return r.a.activeDb.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dbStatus",{get:function(){return r.a.dbStatus},set:function(e){r.a.dbStatus=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dbConnection",{get:function(){return r.a.dbConnection},set:function(e){r.a.dbConnection=e},enumerable:!0,configurable:!0}),e.prototype.updateDbStatus=function(e,t){r.a.updateDbStatus(e,t)},e.prototype.onDbDroppedByBrowser=function(e){r.a.callDbDroppedByBrowser(e)},Object.defineProperty(e.prototype,"dbVersion",{get:function(){return parseInt(r.a.activeDbVersion)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeDb",{get:function(){return r.a.activeDb},enumerable:!0,configurable:!0}),e.prototype.getDbList=function(){return r.a.getDbList()},e.prototype.setDbList=function(e){return r.a.setDbList(e)},e.prototype.isNullOrEmpty=function(e){return i.a.isNullOrEmpty(e)},e.prototype.onDbClose=function(e){this.onDbDroppedByBrowser(),this.updateDbStatus(o.b.Closed,o.d.ConnectionClosed)},e.prototype.onDbVersionChange=function(e){null===e.newVersion&&(e.target.close(),this.onDbDroppedByBrowser(!0),this.updateDbStatus(o.b.Closed,o.d.ConnectionClosed))},e.prototype.onDbConError=function(e){r.a.dbStatus.lastError="Error occured in connection :"+e.target.result},e}()},function(e,t,n){"use strict";var r,o=n(12),i=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onQueryFinished=function(){},t}(o.a),s=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.executeWhereUndefinedLogic=function(){var e,t=this,n=this.objectStore.openCursor();n.onsuccess=function(n){(e=n.target.result)?(e.delete(),++t.rowAffected,e.continue()):t.onQueryFinished()},n.onerror=this.onErrorOccured},t}(u),a=n(1),h=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t.prototype.executeInLogic=function(e,t){var n,r,o=this;Object(a.b)(t.map(function(t){return i=t,Object(a.a)(function(t,u){(r=o.objectStore.index(e).openCursor(o.getKeyRange(i))).onsuccess=function(e){(n=e.target.result)?(o.whereCheckerInstance.check(n.value)&&(n.delete(),++o.rowAffected),n.continue()):t()},r.onerror=u});var i})).then(function(){o.onQueryFinished()}).catch(function(e){o.onErrorOccured(e)})},t}(c),f=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.executeRegexLogic=function(e,t){var n,r=this;this.regexExpression=t;var o=this.objectStore.index(e).openCursor();o.onerror=this.onErrorOccured,o.onsuccess=function(e){(n=e.target.result)?(r.regexTest(n.key)&&r.whereCheckerInstance.check(n.value)&&(n.delete(),++r.rowAffected),n.continue()):r.onQueryFinished()}},t}(l),y=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y(t,e),t.prototype.executeWhereLogic=function(e,t,n){var r,o,i=this;t=n?t[n]:t,(o=this.objectStore.index(e).openCursor(this.getKeyRange(t,n))).onsuccess=function(e){(r=e.target.result)?(i.whereCheckerInstance.check(r.value)&&(r.delete(),++i.rowAffected),r.continue()):i.onQueryFinished()},o.onerror=this.onErrorOccured},t}(p),d=n(8),b=n(0),g=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),v=function(e){function t(t,n,r){var o=e.call(this)||this;return o.onTransactionCompleted_=function(){null==o.error?o.onSuccess(o.rowAffected):o.onError(o.error)},o.query=t,o.onSuccess=n,o.onError=r,o}return g(t,e),t.prototype.execute=function(){try{this.initTransaction_(),null!=this.query.where?this.isArray(this.query.where)?this.processWhereArrayQry():this.processWhere_():this.executeWhereUndefinedLogic()}catch(e){this.onExceptionOccured(e,{tableName:this.query.from})}},t.prototype.processWhereArrayQry=function(){var e=this,t=new d.a(this.query,function(t){var n,r,o=[],i=e.getPrimaryKey(e.query.from);t.forEach(function(e){o.push(e[i])}),t=null;var u=((n={})[i]=((r={})[b.g.In]=o,r),n);e.query.ignoreCase=null,e.query[b.g.Where]=u,e.processWhere_()},this.onError);t.isSubQuery=!0,t.execute()},t.prototype.processWhere_=function(){this.query.where.or&&this.processOrLogic(),this.goToWhereLogic()},t.prototype.initTransaction_=function(){this.createTransaction([this.query.from],this.onTransactionCompleted_),this.objectStore=this.transaction.objectStore(this.query.from)},t.prototype.onQueryFinished=function(){!0===this.isOr?this.orQuerySuccess_():!0===this.isTransaction&&this.onTransactionCompleted_()},t.prototype.orQuerySuccess_=function(){var e=this.getObjectFirstKey(this._orInfo.OrQuery);if(null!=e){var t={};t[e]=this._orInfo.OrQuery[e],delete this._orInfo.OrQuery[e],this.query.where=t,this.goToWhereLogic()}else this.isOr=!0},t.prototype.processOrLogic=function(){this.isOr=!0,this._orInfo={OrQuery:this.query.where.or},delete this.query.where.or},t}(_);n.d(t,"a",function(){return v})},function(e,t,n){"use strict";var r,o=n(12),i=(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resultCount=0,t.onTransactionCompleted_=function(){null==t.error?t.onSuccess(t.resultCount):t.onError(t.error)},t}return i(t,e),t.prototype.onQueryFinished=function(){!0===this.isTransaction&&this.onTransactionCompleted_()},t}(o.a),s=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.executeWhereUndefinedLogic=function(){var e=this;if(this.objectStore.count){var t=this.objectStore.count();t.onsuccess=function(){e.resultCount=t.result,e.onQueryFinished()},t.onerror=this.onErrorOccured}else{var n,r=this.objectStore.openCursor();r.onsuccess=function(e){(n=e.target.result)?(++this._resultCount,n.continue()):this.onQueryFinished()}.bind(this),r.onerror=this.onErrorOccured}},t}(u),a=n(1),h=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return h(t,e),t.prototype.executeInLogic=function(e,t){var n,r,o=this,i=this.objectStore.index(e),u=function(e){return Object(a.a)(function(t,u){(r=i.openCursor(o.getKeyRange(e))).onsuccess=function(e){(n=e.target.result)?(o.whereCheckerInstance.check(n.value)&&++o.resultCount,n.continue()):t()},r.onerror=u})};this.objectStore.count&&(u=function(e){return Object(a.a)(function(t,n){(r=i.count(o.getKeyRange(e))).onsuccess=function(e){o.resultCount+=e.target.result,t()},r.onerror=n})}),Object(a.b)(t.map(function(e){return u(e)})).then(function(){o.onQueryFinished()}).catch(function(e){o.onErrorOccured(e)})},t}(c),f=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.executeRegexLogic=function(e,t){var n,r=this;this.regexExpression=t;var o=this.objectStore.index(e).openCursor();o.onerror=this.onErrorOccured,o.onsuccess=function(e){(n=e.target.result)?(r.regexTest(n.key)&&r.whereCheckerInstance.check(n.value)&&++r.resultCount,n.continue()):r.onQueryFinished()}},t}(l),y=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return y(t,e),t.prototype.executeWhereLogic=function(e,t,n){var r,o,i=this;t=n?t[n]:t,(this.objectStore.count?function(){(r=i.objectStore.index(e).count(i.getKeyRange(t,n))).onsuccess=function(){i.resultCount=r.result,i.onQueryFinished()}}:function(){(r=i.objectStore.index(e).openCursor(i.getKeyRange(t,n))).onsuccess=function(e){(o=e.target.result)?(i.whereCheckerInstance.check(o.value)&&++i.resultCount,o.continue()):i.onQueryFinished()}})(),r.onerror=this.onErrorOccured},t}(p),d=n(8),b=n(0),g=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),v=function(e){function t(t,n,r){var o=e.call(this)||this;return o.onError=r,o.onSuccess=n,o.query=t,o}return g(t,e),t.prototype.execute=function(){var e=this;try{var t=function(){new d.a(e.query,function(t){e.resultCount=t.length,e.onTransactionCompleted_()},e.onError).execute()};null==this.query.join?null!=this.query.where?this.query.where.or||this.isArray(this.query.where)?t():(this.initTransaction_(),this.goToWhereLogic()):(this.initTransaction_(),this.executeWhereUndefinedLogic()):t()}catch(e){this.onExceptionOccured(e,{tableName:this.query.from})}},t.prototype.initTransaction_=function(){this.createTransaction([this.query.from],this.onTransactionCompleted_,b.e.ReadOnly),this.objectStore=this.transaction.objectStore(this.query.from)},t}(_);n.d(t,"a",function(){return v})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return Instance});var _base__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),_select_index__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(8),_count_index__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(19),_insert_index__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(14),_remove_index__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(18),_update_index__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(13),_enums__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(0),_query_helper__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(11),_log_helper__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(3),_util__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(5),_helpers_index__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(1),__extends=(extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),extendStatics,Instance=function(_super){function Instance(e,t,n){var r=_super.call(this)||this;return r.requestQueue=[],r.isQueryExecuting=!1,r.isTxStarted_=!1,r.query=e,r.onError=n,r.onSuccess=t,r.results={},r}return __extends(Instance,_super),Instance.prototype.execute=function(){var e=this,t=this.getNotExistingTable_(this.query.tables);null==t?Object(_helpers_index__WEBPACK_IMPORTED_MODULE_10__.b)(this.query.tables.map(function(t){return _util__WEBPACK_IMPORTED_MODULE_9__.a.getAutoIncrementValues(e.getTable(t))})).then(function(t){t.forEach(function(t,n){_query_helper__WEBPACK_IMPORTED_MODULE_7__.a.autoIncrementValues[e.query.tables[n]]=t}),e.startExecution_()}).catch(this.onError):this.onError(new _log_helper__WEBPACK_IMPORTED_MODULE_8__.a(_enums__WEBPACK_IMPORTED_MODULE_6__.d.TableNotExist,{tableName:t}).get())},Instance.prototype.startExecution_=function(){var _this=this,select=function(e){return _this.pushRequest_({name:_enums__WEBPACK_IMPORTED_MODULE_6__.a.Select,query:e})},insert=function(e){return _this.pushRequest_({name:_enums__WEBPACK_IMPORTED_MODULE_6__.a.Insert,query:e})},update=function(e){return _this.pushRequest_({name:_enums__WEBPACK_IMPORTED_MODULE_6__.a.Update,query:e})},remove=function(e){return _this.pushRequest_({name:_enums__WEBPACK_IMPORTED_MODULE_6__.a.Remove,query:e})},count=function(e){return _this.pushRequest_({name:_enums__WEBPACK_IMPORTED_MODULE_6__.a.Count,query:e})},setResult=function(e,t){_this.results[e]=t},getResult=function(e){return _this.results[e]},abort=function(e){_this.abortTransaction_(e)},start=function(){_this.checkQueries_(_this.requestQueue).then(function(e){_this.startTransaction_()}).catch(function(e){_this.onError(e)})},txLogic=null;eval("txLogic ="+this.query.logic),txLogic.call(this,this.query.data)},Instance.prototype.startTransaction_=function(){try{this.isTxStarted_=!0,this.initTransaction_(this.query.tables),this.processExecutionOfQry_()}catch(e){this.onExceptionOccured(e,{tableName:this.query.tables})}},Instance.prototype.initTransaction_=function(e){this.createTransaction(e,this.onTransactionCompleted_.bind(this))},Instance.prototype.onTransactionCompleted_=function(){this.onSuccess(this.results)},Instance.prototype.onRequestFinished_=function(e){var t=this.requestQueue.shift();t&&(this.error?(this.abortTransaction_("automatic abort of transaction due to error occured"),this.onErrorOccured(this.error)):(this.isQueryExecuting=!1,t.onSuccess&&t.onSuccess(e),this.processExecutionOfQry_()))},Instance.prototype.abortTransaction_=function(e){null!=this.transaction&&this.transaction.abort()},Instance.prototype.executeRequest_=function(e){var t;switch(this.isQueryExecuting=!0,e.name){case _enums__WEBPACK_IMPORTED_MODULE_6__.a.Select:t=new _select_index__WEBPACK_IMPORTED_MODULE_1__.a(e.query,this.onRequestFinished_.bind(this),this.onError.bind(this));break;case _enums__WEBPACK_IMPORTED_MODULE_6__.a.Insert:t=new _insert_index__WEBPACK_IMPORTED_MODULE_3__.a(e.query,this.onRequestFinished_.bind(this),this.onError.bind(this));break;case _enums__WEBPACK_IMPORTED_MODULE_6__.a.Update:t=new _update_index__WEBPACK_IMPORTED_MODULE_5__.a(e.query,this.onRequestFinished_.bind(this),this.onError.bind(this));break;case _enums__WEBPACK_IMPORTED_MODULE_6__.a.Remove:t=new _remove_index__WEBPACK_IMPORTED_MODULE_4__.a(e.query,this.onRequestFinished_.bind(this),this.onError.bind(this));break;case _enums__WEBPACK_IMPORTED_MODULE_6__.a.Count:t=new _count_index__WEBPACK_IMPORTED_MODULE_2__.a(e.query,this.onRequestFinished_.bind(this),this.onError.bind(this))}t.isTransaction=!0,t.execute()},Instance.prototype.pushRequest_=function(e){var t=this,n=function(){t.requestQueue.push(e)},r=Object(_helpers_index__WEBPACK_IMPORTED_MODULE_10__.a)(function(n,r){e.onSuccess=function(e){n(e)},e.onError=function(e){t.error=e,r(e)}});return!0===this.isTxStarted_?this.checkQueries_([e]).then(function(){n(),t.processExecutionOfQry_()}).catch(function(e){t.error=e,t.abortTransaction_(JSON.stringify(e))}):n(),r},Instance.prototype.processExecutionOfQry_=function(){this.requestQueue.length>0&&!1===this.isQueryExecuting&&this.executeRequest_(this.requestQueue[0])},Instance.prototype.checkQueries_=function(e){return Object(_helpers_index__WEBPACK_IMPORTED_MODULE_10__.b)(e.map(function(e){e.query.into||e.query.in;return new _query_helper__WEBPACK_IMPORTED_MODULE_7__.a(e.name,e.query).checkAndModify()}))},Instance.prototype.getNotExistingTable_=function(e){var t=this,n=null;return e.every(function(e){return!1!==t.isTableExist(e)||(n=e,!1)}),n},Instance}(_base__WEBPACK_IMPORTED_MODULE_0__.a)},function(e,t,n){"use strict";n.r(t);var r=n(10),o=n(9),i=function(){void 0===self.alert&&"undefined"==typeof ServiceWorkerGlobalScope&&(o.a.isRuningInWorker=!0,self.onmessage=function(e){(new r.a).checkConnectionAndExecuteLogic(e.data)})};i();var u=n(15);n.d(t,"QueryExecutor",function(){return r.a}),n.d(t,"initialize",function(){return i}),n.d(t,"Config",function(){return o.a}),n.d(t,"KeyStore",function(){return u.a})}]);